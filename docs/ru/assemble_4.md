# Сборка Клевера 4

## Сборка основы для рамы

1. Совместите 2 карбоновые пластины жесткости, используя центральные пазы.
2. Используя пазы, установите сверху карбоновую центральную деку.

    <div class="image-group">
        <img src="../assets/4/01.png" class="zoom border">
        <img src="../assets/4/02.png" class="zoom border">
    </div>

3. Стяните конструкцию с помощью винтов М3х8 и стальных гаек с нейлоновой вставкой, установленных в пазах пластин.

    <div class="image-group">
        <img src="../assets/4/03.png" width=300 class="zoom border">
        <img src="../assets/4/03_1.png" width=300 class="zoom border">
    </div>

## Установка моторов

1. Распакуйте моторы.
2. Используя бокорезы, укоротите провода на моторах:

    * Обрежьте половину длины (оставив 30 мм).
    * Зачистите (снимите 5 мм изоляции с конца провода, не повредив медные жилы).

    <img src="../assets/4/04.png" width=300 class="zoom center border">

    * Скрутите медные жилы.
    * [Залудите провода](tinning.md), используя пинцет.

3. Установите мотор на луч.
4. Прикрепите мотор к лучу винтами М3х5, используя шестигранный ключ или отвёртку.

<img src="../assets/4/05.png" width=300 class="zoom center border">

Повторите эти действия для остальных моторов.

## Сборка рамы

1. Установите 4 луча с моторами на базу рамы, используя пазы, согласно схеме вращения моторов.

    <img src="../assets/4/05.png" width=300 class="zoom center border">

    > **Hint** Для правильной установки моторов обратите внимание на цвета гаек. Моторы с красными гайками следует установить на передний правый и задний левый лучи, с чёрными - на передний левый и задний правый.

2. Зафиксируйте лучи на раме, используя 8 винтов М3х8 и 6 стальных гаек, а также 2 стойки "мама-мама" 15 мм.

    <div class="image-group">
        <img src="../assets/4/07.png" width=300 class="zoom border">
        <img src="../assets/4/07_1.png" width=300 class="zoom border">
    </div>

## Подготовка платы распределения питания

1. [Залудите](tinning.md) контактные площадки платы питания.
2. С помощью мультиметра проверьте отсутствие короткого замыкания (прозвонить):
    * Установите мультиметр в режим прозвонки.
    * Проверьте работу мультиметра путем замыкания щупов между собой. При корректной работе прибор издаст характерный звук.
    * Попарно один щуп прикладывается к контакту **«+»**, а второй к **«-»/GND**. Если в цепи есть короткое замыкание, издается звук.

## Монтаж PDB

1. Установите 4 стойки "папа-мама" 6 мм на центральную деку винтами М3х6.

    <div class="image-group">
        <img src="../assets/4/08.png" width=300 class="zoom border">
        <img src="../assets/4/08_1.png" width=300 class="zoom border">
    </div>

2. Установите PDB на стойки.
3. Стрелки на PDB и центральной деке должны быть направлены в одну сторону.

    <img src="../assets/4/09.png" width=300 class="zoom center border">

## Пайка регуляторов и ВЕС

1. Припаяйте фазные провода моторов к регуляторам.
2. Припаяйте силовые провода регуляторов к контактным площадкам платы (**<font color=red>красный</font>** к **«+»**, **черный** к **«-»**).

    <div class="image-group">
        <img src="../assets/4/09.png" width=300 class="zoom border">
        <img src="../assets/4/10_1.png" width=300 class="zoom border">
    </div>

3. Припаяйте силовые провода каждого BEC к контактным площадкам одного из регуляторов (**<font color=red>красный</font>** к **«+»**, **черный** к **«-»**).

    <div class="image-group">
        <img src="../assets/4/10.png" width=300 class="zoom border">
        <img src="../assets/4/12_1.png" width=300 class="zoom border">
    </div>

4. С помощью мультиметра проверьте, что в цепи нет короткого замыкания.

## Проверка направления вращения моторов

Моторы с **<font color=red>красными</font>** гайками должны вращаться **против** часовой стрелки, с **чёрными** - **по** часовой стрелке. Правильные направления вращения также указаны на самих моторах. Для проверки направления вращения можно использовать серво-тестер или радиоприёмник с пультом.

<img src="../assets/4/props/props_rotation.png" width=300 class="zoom center">

Использование радиоприёмника и пульта описано ниже.

### Перевод пульта в режим PWM

Включите пульт с помощью слайдера **POWER**. Если пульт заблокирован, необходимо перевести все стики в начальное положение:

1. Левый стик в **центральной нижней позиции**.
2. Правый стик в **центре**.
3. Переключатели A, B, C, D в положение **"от себя"**.

    <img src="../assets/4/radio/base.png" alt="Нейтральное положение стиков пульта" class="zoom center" width=500>

Убедитесь, что PPM в меню RX Setup отключен:

1. Убедитесь, что питание дрона выключено.
2. Для входа в меню удерживайте нажатой кнопку "ОК".
3. Кнопками Up/Down выбираем меню "System setup", кнопкой "ОК" подтвердите выбор.
4. Выберите "RX Setup".
5. Выберите "Output mode".
6. Убедитесь, что в открывшемся меню выбран пункт "PWM".
7. Чтобы сохранить настройки, удерживайте нажатой кнопку "Cancel".

### Сопряжение приёмника и пульта

1. Выключите пульт с помощью слайдера **POWER**.
2. Подключите радиоприемник к разъему от BEC 5В. Чёрный провод подключите к одному из нижних пинов, красный - к одному из центральных.
3. Установите джампер на вход (B/VCC).
4. Подключите АКБ.
5. Светодиод на радиоприемнике должен мигать.

    <div class="image-group">
        <img src="../assets/4/13.png" width=300 class="zoom border">
        <img src="../assets/4/13_1.png" width=300 class="zoom border">
    </div>

6. Зажмите кнопку **BIND KEY** на пульте.
7. Включите пульт (перещелкните **POWER**, не отпуская **BIND KEY**).

    <img src="../assets/4/radio/binding.png" class="zoom center" width=500>

8. Ждите синхронизации.
9. Отсоедините джампер.
10. Светодиод на приемнике должен гореть непрерывно.

### Проверка направления вращения моторов

1. Отключите АКБ и пульт.
2. Подключите сигнальный провод от ESC к выходу CH3 на приёмнике. Белый провод должен подходить к верхнему пину, чёрный - к нижнему.
3. Включите пульт. Левый стик должен быть в нижнем положении.
4. Подключите АКБ.
5. Медленно поднимайте левый стик до тех пор, пока мотор не начнёт вращаться.

Если мотор вращается в неправильную сторону, поменяйте местами два любых фазных провода.

> **Info** Направление вращения также можно изменить программно. Процесс описан [в статье про прошивку ESC](esc_firmware.md).

Повторите процесс для каждого мотора.

### Перевод пульта в режим PPM

Полётный контроллер не может работать с пультом в режиме PWM, поэтому следует произвести перевод пульта в режим PPM.

1. Убедитесь, что питание дрона выключено.
2. Для входа в меню удерживайте нажатой кнопку "ОК".
3. Кнопками Up/Down выбираем меню "System setup", кнопкой "ОК" подтвердите выбор.
4. Выберите "RX Setup".
5. Выберите "Output mode".
6. Убедитесь, что в открывшемся меню выбран пункт "PPM".
7. Чтобы сохранить настройки, удерживайте нажатой кнопку "Cancel".

## Установка пластины для полётного контроллера

1. Установите 4 стойки "папа-мама" 6 мм на PDB.
2. Подключите шлейф питания к PDB.
3. Установите поликарбонатную пластину на стойки и зафиксируйте нейлоновыми гайками.

    <div class="image-group">
        <img src="../assets/4/14.png" width=300 class="zoom border">
        <img src="../assets/4/15.png" width=300 class="zoom border">
        <img src="../assets/4/16.png" width=300 class="zoom border">
    </div>

## Установка полётного контроллера

1. Установите полетный контроллер на пластину с помощью двухстороннего скотча.
2. Стрелки на полетном контроллере и центральной деке должны быть направлены в одну сторону.
3. Подключите шлейф питания PDB к разъему *"POWER"* полетного контроллера, закрутив его в "косичку" для взаимной фиксации проводов.

    <div class="image-group">
        <img src="../assets/4/18.png" width=300 class="zoom border">
        <img src="../assets/4/18_1.png" width=300 class="zoom border">
    </div>

4. Установите 4 алюминиевые стойки 40 мм с помощью винтов М3х10.

    <div class="image-group">
        <img src="../assets/4/19.png" width=300 class="zoom border">
        <img src="../assets/4/19_1.png" width=300 class="zoom border">
    </div>

5. Подключите сигнальные провода регуляторов к полетному контроллеру следующим образом:

    <div class="image-group">
        <img src="../assets/4/20.png" width=300 class="zoom border">
        <img src="../assets/4/20_1.png" width=300 class="zoom border">
    </div>

6. Установите 2 стойки "мама-мама" 15 мм на центральную деку с помощью винтов М3х8.
7. Другие 2 стойки были установлены ранее в разделе "Сборка рамы", п. 2.

    <div class="image-group">
        <img src="../assets/4/21.png" width=300 class="zoom border">
        <img src="../assets/4/21_1.png" width=300 class="zoom border">
    </div>

## Установка обруча для светодиодной ленты

1. Согните поликарбонатную заготовку в обруч и зафиксируйте ее концы в замке.
2. Установите обруч на раму, используя пазы.

    <div class="image-group">
        <img src="../assets/4/22.png" width=300 class="zoom border">
        <img src="../assets/4/23.png" width=300 class="zoom border">
    </div>

## Установка Raspberry Pi

1. Вставьте карту microSD с [записанным образом](image.md) в Raspberry Pi

    <img src="../assets/4/rpi/rpi_sdcard.png" width=300 class="zoom center border">

2. Установите плату Raspberry Pi на стойки, используя 4 стойки "папа-мама".
3. Протяните провода от BEC через паз в центральной раме.

    <div class="image-group">
        <img src="../assets/4/24.png" width=300 class="zoom border">
        <img src="../assets/4/26.png" width=300 class="zoom border">
    </div>

4. Подключите провод питания от BEC к Raspberry, согласно схеме:

<img src="../assets/4/26_1.png" width=300 class="zoom center border">

## Установка светодиодной ленты на обруч

1. Проверьте наличие напаянных пинов на контактах ленты (при отсутствии - напаять).
2. Установите светодиодную ленту на обруч (используя клеевой слой на ленте) так, чтобы контакты были в задней части коптера. Для дополнительной фиксации используйте **стяжки**.

    <div class="image-group">
        <img src="../assets/4/27.png" width=300 class="zoom border">
        <img src="../assets/4/27_1.png" width=300 class="zoom border">
        <img src="../assets/4/28.png" width=300 class="zoom border">
    </div>

## Подключение светодиодной ленты к Raspberry Pi

1. Питание для ленты берется от второго BEC. Подключите контакты *«-»* и *«+»* к *Ground* и *5v* на ленте соответственно.
2. Подключите контакт *D* к GPIO-пину на Raspberry. Рекомендуется использовать пин GPIO21.

    <div class="image-group">
        <img src="../assets/4/31_1.png" width=300 class="zoom border">
        <img src="../assets/4/31_2.png" width=300 class="zoom border">
    </div>

## Установка шлейфа для камеры

1. Поднимите защелку.
2. Подключите шлейф.
3. Закройте защелку.

<img src="../assets/4/32.png" width=300 class="zoom center border">

## Установка оборудования на нижнюю монтажную деку

1. Подготовьте лазерный дальномер к монтажу, предварительно напаяв на него контакты.
2. Установите камеру на 4 самореза 2х5.
3. Установить на деку лазерный дальномер с помощью 2 винтов М3х8 и стальных гаек.

    <div class="image-group">
        <img src="../assets/4/33.png" width=300 class="zoom border">
        <img src="../assets/4/33_1.png" width=300 class="zoom border">
    </div>

4. Установите приемник на нижнюю деку с помощью двухстороннего скотча.

    <img src="../assets/4/34.png" width=300 class="zoom center border">

5. Установите нижнюю деку с помощью 4 винтов М3х10.
6. Подключите шлейф к камере.

    <div class="image-group">
        <img src="../assets/4/35.png" width=300 class="zoom border">
        <img src="../assets/4/36.png" width=300 class="zoom border">
    </div>

7. Подключите лазерный дальномер к Raspberry Pi с помощью проводов типа "мама-мама":
    * Разъем *VCC* к пину 1 (*3.3v*).
    * Разъем *GND* к пину 9 (*Ground*).
    * Разъем *SDA* к пину 3 (*GPIO02*).
    * Разъем *SCL* к пину 5 (*GPIO03*).

    <img src="../assets/4/36.png" width=300 class="zoom center border">

## Монтаж ножек

1. Установите 8 ножек с помощью винтов М3х10 и стальных гаек.
2. Установите демпфирующие прокладки на ножки с помощью винтов М3х10 и стальных гаек.

    <div class="image-group">
        <img src="../assets/4/37.png" width=300 class="zoom border">
        <img src="../assets/4/38.png" width=300 class="zoom border">
    </div>

## Подключение шлейфов

1. Подключите шлейф радиоприемника в *RCIN* разъем полетного контроллера.
2. Подключите шлейф к приемнику.

    <img src="../assets/4/39.png" width=300 class="zoom center border">

## Сборка защиты винтов

1. Соберите нижнюю часть защиты, используя 12 винтов М3х10 и 12 нейлоновых стоек 40 мм.
2. Установите верхнюю часть, используя 12 винтов М3х10.

    <div class="image-group">
        <img src="../assets/4/40.png" width=300 class="zoom border">
        <img src="../assets/4/41.png" width=300 class="zoom border">
    </div>

3. Установите защиту на коптер, с помощью 4 винтов М3х10 и стальных гаек.

    <div class="image-group">
        <img src="../assets/4/42.png" width=300 class="zoom border">
        <img src="../assets/4/42_1.png" width=300 class="zoom border">
    </div>

## Установка верхней деки на коптер

1. Установите на верхнюю деку держатель АКБ с помощью 4 винтов М3х8 и стальных гаек.
2. Проденьте в пазы ремешок для фиксации АКБ.
3. Установите верхнюю деку на коптер с помощью 4 винтов М3х10.

    <div class="image-group">
        <img src="../assets/4/42.png" width=300 class="zoom border">
        <img src="../assets/4/42_1.png" width=300 class="zoom border">
    </div>

4. Подключите USB кабель к разъему на полетном контроллере и USB разъему Raspberry Pi.

    <img src="../assets/4/43_1.png" width=300 class="zoom center border">

5. Зафиксируйте "улитку" кабеля в удобном месте с помощью двухстороннего скотча так, чтобы провод не мешал вращению винтов.

    <div class="image-group">
        <img src="../assets/4/47_1.png" width=300 class="zoom border">
        <img src="../assets/4/47_2.png" width=300 class="zoom border">
    </div>

## Установка АКБ

> **Warning** Убедитесь, чтобы все провода были спрятаны и движению пропеллеров ничего не мешает.

Проверьте сборку квадрокоптера:

* Балансировочный разъем АКБ должен быть спрятан под утягивающим ремешком.
* Регуляторы должны быть зафиксированы хомутами.
* Все провода, идущие от PDB и полетного контроллера, должны быть зафиксированы липучкой, обмотанной вокруг алюминиевых стоек.

<img src="../assets/4/48.png" width=300 class="zoom center border">

## Установка пропеллеров и подготовка к полёту

Произведите настройку компонентов квадрокоптера, используя раздел ["Настройка"](setup.md).

> **Warning** Установка пропеллеров должна производиться **только после окончательной настройки коптера**, непосредственно перед полетом.

Установите 4 пропеллера, согласно схеме вращения. При установке пропеллеров АКБ должна быть отключена.

<div class="image-group">
    <img src="../assets/4/49.png" width=300 class="zoom border">
    <img src="../assets/4/50.png" width=300 class="zoom border">
</div>

> **Success** Дрон готов к полету!.
